function buildLink(t,n,r){var e,i="",a=$(".card-qty").val()||1,l=["format=json","action=query"];return e="search"===n?["list=search","srsearch="+r,"srlimit="+a]:["generator=random","grnnamespace=0","grnlimit=1","prop=extracts","exintro="],e=_.union(l,e),_.each(e,function(t){i=i+"&"+t}),t+i}function startDisplay(){var t=$(".search").val().trim(),n="";t.length>0?(type="search",n=buildLink(base_url,type,t)):(type="",n=buildLink(base_url)),getData(n,type)}function request(t){return $(".current-wiki").addClass("loading"),$(".intro").html(""),$(".title").html(""),$(".article-link").html(""),$.ajax({url:t,type:"GET",dataType:"jsonp"})}function getData(t,n){request(t).done(function(t){n?displayMultiple(t.query.search):displayOne(t.query.pages[_.keys(t.query.pages)[0]])})}function displayOne(t){$(".cards-wrap").html($("#one-card").html()),buildCard(t)}function displayMultiple(t){return $(".cards-wrap").empty(),0===t.length?void showNoCard():void _.each(t,function(t){var n={};n.title=t.title,n.snippet=getFirstP(t.snippet),n.link=articleLink(t.title),n.rotation=randomNum(-1,1);var r=_.template($("#cards").html());$(".cards-wrap").append(r(n))})}function buildCard(t){var n=t.extract||t.snippet;$(".current-wiki").removeClass("loading");var r=t.title,e=randomNum(-1,1);$(".current-wiki").css("transform","rotate("+e+"deg)"),$(".title").html(r),$(".intro").html(getFirstP(n)),$(".article-link").attr("href",articleLink(r)).html("w")}function showNoCard(){$(".cards-wrap").html($("#nothing").html())}function getFirstP(t){return t.split("</p>")[0]+"</p>"}function articleLink(t){return t=t.replace(/\s/g,"_"),"http://en.wikipedia.org/wiki/"+t}function randomNum(t,n){return(Math.random()*n+t)*(Math.random()<.5?-1:1)}function changeText(t){$(".button-text").html(t)}var base_url="https://en.wikipedia.org/w/api.php?",type="",wikiAPI_URL=buildLink(base_url);$(function(){getData(wikiAPI_URL),$(".discard").on("click",startDisplay),$(document).keyup(function(t){13===t.keyCode&&startDisplay()}),$(".search").keyup(function(){$(this).val().trim().length>0?$(".card-qty").attr("disabled",!1):$(".card-qty").attr("disabled",!0)})});try{console.log("%c    ___        ________   ________ \n    |\\  \\      |\\   ____\\ |\\   __  \\ \n    \\ \\  \\     \\ \\  \\___| \\ \\  \\|\\  \\ \n  __ \\ \\  \\     \\ \\  \\  ___\\ \\  \\\\\\  \\ \n |\\  \\\\_\\  \\  ___\\ \\  \\|\\  \\\\ \\  \\\\\\  \\   \n \\ \\________\\|\\__\\\\ \\_______\\\\ \\_______\\ \n  \\|________|\\|__| \\|_______| \\|_______| \n\n %cLet me know if you have any questions. \n\n github: http://github.com/jgoley \n twitter: http://twitter.com/jgoley \n ","color:rgba(1, 164, 245, 1);","color:rgba(255, 64, 64, 1);")}catch(e){}